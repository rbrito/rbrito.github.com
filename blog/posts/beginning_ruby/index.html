<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8" />
<title>Beginning Ruby</title>

<link rel="stylesheet" href="../../style.css" type="text/css" />

<link rel="stylesheet" href="../../local.css" type="text/css" />




<meta name="date" content="Sat, 20 Jul 2013 21:50:00 -0300" />


</head>
<body>

<article class="page">

<section class="pageheader">
<header class="header">
<span>
<span class="parentlinks">

<a href="../../">Rogério Brito's Digital Junkyard</a>/

<a href="../">posts</a>/

</span>
<span class="title">
Beginning Ruby

</span>
</span>

</header>







</section>


<aside class="sidebar">
<div><div class="calendar"><table class="month-calendar">
    <tr>
    <th class="month-calendar-arrow"><a href="../../archives/2013/11/" title="November">&larr;</a></th>
    <th class="month-calendar-head" colspan="5"><a href="../../archives/2013/12/" title="December">Dec 2013</a></th>
    <th class="month-calendar-arrow"></th>
    </tr>
    <tr>
        <th class="month-calendar-day-head Sunday" title="Sunday">S</th>
        <th class="month-calendar-day-head Monday" title="Monday">M</th>
        <th class="month-calendar-day-head Tuesday" title="Tuesday">T</th>
        <th class="month-calendar-day-head Wednesday" title="Wednesday">W</th>
        <th class="month-calendar-day-head Thursday" title="Thursday">T</th>
        <th class="month-calendar-day-head Friday" title="Friday">F</th>
        <th class="month-calendar-day-head Saturday" title="Saturday">S</th>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">1</td>
        <td class="month-calendar-day-nolink Monday">2</td>
        <td class="month-calendar-day-nolink Tuesday">3</td>
        <td class="month-calendar-day-nolink Wednesday">4</td>
        <td class="month-calendar-day-nolink Thursday">5</td>
        <td class="month-calendar-day-nolink Friday">6</td>
        <td class="month-calendar-day-nolink Saturday">7</td>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">8</td>
        <td class="month-calendar-day-nolink Monday">9</td>
        <td class="month-calendar-day-nolink Tuesday">10</td>
        <td class="month-calendar-day-this-day Wednesday">11</td>
        <td class="month-calendar-day-future Thursday">12</td>
        <td class="month-calendar-day-nolink Friday">13</td>
        <td class="month-calendar-day-nolink Saturday">14</td>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">15</td>
        <td class="month-calendar-day-nolink Monday">16</td>
        <td class="month-calendar-day-nolink Tuesday">17</td>
        <td class="month-calendar-day-nolink Wednesday">18</td>
        <td class="month-calendar-day-nolink Thursday">19</td>
        <td class="month-calendar-day-nolink Friday">20</td>
        <td class="month-calendar-day-nolink Saturday">21</td>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">22</td>
        <td class="month-calendar-day-nolink Monday">23</td>
        <td class="month-calendar-day-nolink Tuesday">24</td>
        <td class="month-calendar-day-nolink Wednesday">25</td>
        <td class="month-calendar-day-nolink Thursday">26</td>
        <td class="month-calendar-day-nolink Friday">27</td>
        <td class="month-calendar-day-nolink Saturday">28</td>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">29</td>
        <td class="month-calendar-day-nolink Monday">30</td>
        <td class="month-calendar-day-nolink Tuesday">31</td>
        <td class="month-calendar-day-noday Wednesday">&nbsp;</td>
        <td class="month-calendar-day-noday Thursday">&nbsp;</td>
        <td class="month-calendar-day-noday Friday">&nbsp;</td>
        <td class="month-calendar-day-noday Saturday">&nbsp;</td>
    </tr>
</table>
</div></div>

<p><a href="../../about/">About Me</a></p>

<p><a href="../../archives/">Archives</a></p>

</aside>


<div id="pagebody">

<section id="content">
<p>These are some very rough/sketchy notes that I took while doing the
exercises on the introductory track of the Ruby language at
<a href="http://www.codeacademy.com/">codeacademy</a>.  They were written from the point-of-view of an amateur
programmer in C and Python (read: "me").</p>

<p>Since this is my first time with Ruby and I only have about 1 week of
experience with it, these notes are likely to contain many mistakes, many
simplifications, many omissions or simply gross errors.  I would love to be
informed of such facts so that I can fix them and not write code that is
burdensome for others to maintain.</p>

<div class="toc">
<ol>
	<li class="L1"><a href="#index1h1">Operators</a>
	</li>
	<li class="L1"><a href="#index2h1">Numbers</a>
	</li>
	<li class="L1"><a href="#index3h1">Basic I/O</a>
	</li>
	<li class="L1"><a href="#index4h1">Strings</a>
	</li>
	<li class="L1"><a href="#index5h1">Control flow</a>
	</li>
	<li class="L1"><a href="#index6h1">Arrays</a>
	</li>
	<li class="L1"><a href="#index7h1">Hashes</a>
	</li>
	<li class="L1"><a href="#index8h1">Functions/methods</a>
	</li>
	<li class="L1"><a href="#index9h1">Symbols</a>
	</li>
	<li class="L1"><a href="#index10h1">Comments</a>
	</li>
	<li class="L1"><a href="#index11h1">Lambda functions</a>
	</li>
	<li class="L1"><a href="#index12h1">Classes</a>
	</li>
	<li class="L1"><a href="#index13h1">Modules</a>
	</li>
	<li class="L1"><a href="#index14h1">Mixins</a>
	</li>
	<li class="L1"><a href="#index15h1">Conventions</a>
	</li>
</ol>
</div>

<h1 id="operators"><a name="index1h1"></a>Operators</h1>

<ul>
<li>Math operators: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>**</code> (just like Python)</li>
<li>Relational operators: <code>==</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code> (just like other
languages)</li>
<li>Boolean operators: <code>&amp;&amp;</code>, <code>||</code>, <code>!</code> (just like C/C++/Perl)</li>
<li>The combined comparison operator ("spaceship operator", like Perl): <code>&lt;=&gt;</code>
(follows the spirit of what <code>strcmp</code> in C does)</li>
<li>Conditional assignment operator (<code>||=</code>) only assigns a value to a variable
if that variable is bound to <code>nil</code>.</li>
</ul>

<h1 id="numbers"><a name="index2h1"></a>Numbers</h1>

<ul>
<li>You can write number literals embedding an underscore (<code>_</code>) for
readability purposes.</li>
</ul>

<h1 id="basicio"><a name="index3h1"></a>Basic I/O</h1>

<ul>
<li>Output: <code>print</code> and <code>puts</code>. Both print strings to stdout, but <code>puts</code> also
appends a new line to the end.</li>
<li>Input: <code>gets</code> accepts an input from stdin and returns a string.</li>
<li>To convert a string <code>foo</code> to an integer, use the <code>Integer(foo)</code>
constructor. It throws an exception if it cannot convert the value.</li>
</ul>

<h1 id="strings"><a name="index4h1"></a>Strings</h1>

<ul>
<li>Strings have at least some methods: <code>.length</code>, <code>.reverse</code>, <code>.upcase</code>,
<code>.downcase</code>, <code>.capitalize</code>, <code>.chomp</code> (like Perl, removes the trailing
endline)</li>
<li><code>.upcase</code> seems to have problems with non-ASCII characters, like <code>é</code>.</li>
<li>Interpolation is performed by putting the name <code>name</code> of the variable
inside a string and delimited as <code>#{name}</code> at the place we want the
interpolation to occur.</li>
<li>Methods like <code>.capitalize</code> don't change the string (they return a new
string capitalized).  To change the string, you call the method
<code>.capitalize!</code> (with a <code>!</code> at the end of the name of the method).</li>
<li>Other useful methods: <code>.gsub</code> for globally substituting a regular
expression (and its variant <code>.gsub!</code> for inplace modification), and
<code>.include?</code> to verify if the first string includes another.</li>
<li>Another method: <code>.split(" ")</code>, to split on the string specified as
argument.</li>
</ul>

<h1 id="controlflow"><a name="index5h1"></a>Control flow</h1>

<h2 id="if"><a name="index1h2"></a>If</h2>

<ul>
<li><p>The syntax of a <code>if</code> is:</p>

<pre><code>if expression1
  block1
elsif expression2
  block2
else
  block3
end
</code></pre>

<p>note that it ends with the word <code>end</code>, there are no need for parentheses,
no braces, no colons, and the keyword for "else if" is <code>elsif</code> (different
from Python's <code>elif</code>).</p></li>
<li>The "<code>if</code>" can also be started with the keyword <code>unless</code> instead, which
checks if the expression is false rather than true (as is the case of
<code>if</code>).</li>
</ul>

<h2 id="while"><a name="index2h2"></a>While</h2>

<ul>
<li><p>The syntax of the <code>while</code> is similar to other languages:</p>

<pre><code>while condition
  block
end
</code></pre></li>
<li><p>A variation of the <code>while</code> is the <code>until</code>, with the same syntax, except
for the <code>until</code> in place of the while, and that it iterates when the
condition is false, instead of true.</p></li>
</ul>

<h2 id="for"><a name="index3h2"></a>For</h2>

<ul>
<li><p>The simple case of iterating over a range of numbers is:</p>

<pre><code>for i in 1...10
  block
end
</code></pre>

<p>Like ranges in Python, the 10 is not included (the variable <code>i</code> iterates
from 1 to 9).</p>

<p>For an <em>inclusive</em> range, we use two dots (<code>1..10</code>), instead of three
dots (<code>1...10</code>).</p></li>
</ul>

<h2 id="loop"><a name="index4h2"></a>Loop</h2>

<ul>
<li><p>To iterate a block, we can use the <code>loop</code> keyword, as in:</p>

<pre><code>loop { block } # with braces
</code></pre>

<p>or as in</p>

<pre><code>loop do # note the pair do/end in place of braces
  block
end
</code></pre></li>
<li><p>It is useful to use <code>break</code> when using loop to break out of the infinite
iterations.</p></li>
<li>Similarly, we can use <code>next</code> as in other languages (the same as <code>continue</code>
in C or C++).</li>
</ul>

<h1 id="arrays"><a name="index6h1"></a>Arrays</h1>

<ul>
<li><p>The equivalent to Python's lists are arrays and they are declared in the
same fashion:</p>

<pre><code>my_array = [1, 2, 3, 4, 5]
</code></pre></li>
<li><p>Arrays in Ruby are 0-based.</p></li>
<li><p>Every array has an iterator called the <code>.each</code> method. The basic syntax
is:</p>

<pre><code>object.each { |item| block } # do something
</code></pre>

<p>which can be written as:</p>

<pre><code>object.each do |item| block end
</code></pre>

<p>where the name between <code>| |</code> is bound to (a copy of?) each element of
<code>object</code> in turn. The equivalent in Python would be:</p>

<pre><code>for item in object:
    block
</code></pre></li>
<li><p>Arrays can be sorted with the <code>.sort</code> method (or its sibling <code>.sort!</code>).
When passing a parameter, it is useful to use the spaceship operator
(<code>&lt;=&gt;</code>) (like Perl) to specify a custom order (similar in spirit to what
we do with Python's <code>key</code> argument to the <code>sort</code> method of a list).
Example:</p>

<pre><code> my_array.sort! {|a, b| a &lt;=&gt; b} # Ascending order
 my_array.sort! {|a, b| b &lt;=&gt; a} # Descending order
</code></pre></li>
<li><p>The <code>.push</code> method appends an element to an Array (similar to Python's
<code>.append</code>).</p></li>
<li>The empty Array is denoted by <code>[]</code>, like an empty list in Python.</li>
<li>An iterator (like <code>(1..10)</code>) can be converted to an array with the <code>.to_a</code>
method.</li>
</ul>

<h1 id="hashes"><a name="index7h1"></a>Hashes</h1>

<ul>
<li><p>A literal hash is defined by the syntax:</p>

<pre><code>my_hash = {
    "key1" =&gt; "abc",
    "key2" =&gt; 2,
    "key3" =&gt; false
}
</code></pre>

<p>Quite similar to the version in Python:</p>

<pre><code>my_hash = {
    "key1": "abc",
    "key2": 2,
    "key3": False
}
</code></pre>

<p>In fact, in Ruby 1.9, you can write, instead:</p>

<pre><code>my_hash = {
    key1: "abc",
    key2: 2,
    key3: false
}
</code></pre>

<p>which is very similar to Python or JSON.</p></li>
<li><p>The empty hash, OTOH, is defined by calling the constructor <code>.new</code> of the
class <code>Hash</code>:</p>

<pre><code>my_hash = Hash.new
</code></pre>

<p>The syntax used by Python can also be used: <code>my_hash = {}</code></p></li>
<li><p>Iterating over a hash is done the same way as done for an array, but the
<code>.each</code> method gives <em>both</em> the key <em>and</em> the value, as in:</p>

<pre><code>my_hash.each do |k, v|
  puts "#{k}: #{v}"
end
</code></pre></li>
<li><p>To iterate only on keys, we use the method <code>.each_key</code>. To iterate only on
values, we use the method <code>.each_value</code>.</p></li>
<li>A hash can be sorted with the <code>.sort_by</code> method (to sort by keys, values
or any expression involving them) and since it can be ordered, we can
reverse (in-place) the order of its elements with the <code>.reverse!</code> method.
This makes Ruby's hashes to "taste" like Python's <code>OrderedDict</code>'s.</li>
<li>When one initializes a hash, one can specify a default value to the <code>.new</code>
method (e.g., <code>foo = Hash.new(0)</code>), which makes it convenient to do the
equivalent of Python's <code>defaultdict</code> or <code>Counter</code>.</li>
<li><p>You can select part of a hash by using the <code>.select</code> method and giving it
a block. For example:</p>

<pre><code>good_movies = movie_ratings.select{|k, v| v &gt; 3}
</code></pre></li>
</ul>

<h1 id="functionsmethods"><a name="index8h1"></a>Functions/methods</h1>

<ul>
<li><p>Functions in Ruby are defined with the word <code>def</code> (as in Python) and end
with the word <code>end</code>, as other composite constructs. Example:</p>

<pre><code>def square(n)
  return n*n
end
</code></pre></li>
<li><p>Parentheses are optional in Ruby, unless they create ambiguity. So, to
call the function above, one can use any of the following:</p>

<pre><code>square(2)
square 2
</code></pre></li>
<li><p>A function can take a block as a parameter (and this is what <code>.each</code> does,
for instance).</p></li>
<li>Functions can take a variable number of elements with the <em>splash</em>
operator (denoted by <code>*</code>), which puts the extra parameters in an Array
(like Python).</li>
<li>Functions can have default parameters, which are set in the "prototype",
just like in Python or C++.</li>
<li>If the <code>return</code> keyword is omitted from the method, Ruby uses an implicit
return, where the value of the last executed expression is returned to the
caller of the method.</li>
</ul>

<h1 id="symbols"><a name="index9h1"></a>Symbols</h1>

<ul>
<li>Any instances of a given symbol share the same ID. This is due to the fact
that they are immutable.</li>
<li>Symbols start with a colon (<code>:</code>) and they can contain any character that
is valid for a variable name.</li>
<li>It is possible to convert between a symbol and a string with the methods
<code>.to_s</code> and <code>.to_sym</code>.</li>
</ul>

<h1 id="comments"><a name="index10h1"></a>Comments</h1>

<ul>
<li>Single line comments use the hash symbol (<code>#</code>).</li>
<li>Ruby also has multiline comments, which are delimited by a line beginning
with <code>=begin</code> and a line beginning with <code>=end</code>.</li>
</ul>

<h1 id="lambdafunctions"><a name="index11h1"></a>Lambda functions</h1>

<ul>
<li><p>A lambda function in Ruby is defined, as expected, as, for example:</p>

<pre><code>foo = lambda { |x| x.to_sym }
</code></pre></li>
<li><p>The basic differences between a lambda and a proc is that:</p>

<ul>
<li>A lambda checks the number of elements that it receives, while a proc
doesn't and assigns <code>nil</code> to parameters that it didn't receive (a proc
seems to ignore extra parameter that it wasn't expecting).</li>
<li>When a lambda returns, the control goes back to the function that called
the lambda, while when a proc returns, the control is returned <em>also</em>
from the function that called the proc.</li>
</ul></li>
</ul>

<h1 id="classes"><a name="index12h1"></a>Classes</h1>

<ul>
<li>"Everything is an object in Ruby." (At least one exception are blocks).</li>
<li>To test if an object is of a given class, you use the method <code>.is_a?</code> on
the object and the type as argument (e.g., <code>foo.is_a? Integer</code>)</li>
<li>The "null" value in Ruby is <code>nil</code>. It is equivalent to <code>None</code> in Python.</li>
<li>The only "falsy" values in Ruby are <code>false</code> and <code>nil</code>. The others are
"truthy", differently from C/C++/Perl/Python.</li>
<li>For a given object, the method <code>.object_id</code> returns what is the "address"
of that object.</li>
<li><p>Classes in Ruby are created with the syntax</p>

<pre><code>class ClassExample
    # body
end
</code></pre>

<p>(That is for a class that has is not derived from other regular classes).</p></li>
<li>Constructors in Ruby are called <code>initialize</code>. An instance of a class is
created by calling the method <code>.new</code> on the class name (and passing
parameters as needed for the <code>initialize</code> method).</li>
<li>Instance variables are named with 1 at sign (<code>@</code>) as a prefix. Class
variables are named with 2 at signs (<code>@@</code>) as a prefix. Global variables
are named with a dollar sign (<code>&#036;</code>) as a prefix.</li>
<li>Class methods are declared inside a class prefixed with <code>self.</code> and they
are called with the class name suffixed with the name of the method. For
example, for a class <code>MyClass</code>, with a class method <code>class_method</code>, we
call it as <code>MyClass.class_method</code>.</li>
<li>When overriding a method in a subclass, one can call the method from the
parent class with the keyword <code>super</code>, as in <code>super(arg1, arg2)</code>.</li>
<li>Ruby doesn't support multiple inheritance. In place of multiple
inheritance, Ruby offers mixins.</li>
<li><p>To access one attribute, say <code>@my_attrib</code>, in Ruby classes, one usually
creates two methods to manipulate it: a method with the name <code>my_attrib</code>,
that returns the value of <code>@my_attrib</code> (a getter) and a method with the
name <code>my_attrib=</code> that accepts a parameter to set <code>@my_attrib</code> to (a
setter).</p>

<p>There is syntatic sugar for creating both getters or setters.</p>

<p>For a getter, you declare <code>attr_reader :my_attrib</code> (the member name as a
symbol).</p>

<p>For a setter, you declare <code>attr_writer :my_attrib</code>.</p>

<p>If you need both a getter and a setter, then you can abbreviate them with
<code>attr_accessor</code>.</p></li>
<li>All methods, by default, are public in Ruby. To explicitly mark something
as public, you use the keyword <code>public</code>. To mark something as private, you
use the keyword <code>private</code>.</li>
</ul>

<h1 id="modules"><a name="index13h1"></a>Modules</h1>

<ul>
<li>You can import a module with the keyword <code>require</code> (as in Perl) and the
name of the module in quotes.</li>
<li>One example of a module is the <code>benchmark</code> module, which provides the
<code>Benchmark</code> class, which has the method <code>.realtime</code>, which takes a block
and reports how much time it used.</li>
<li>To create a module, use a syntax similar to that of a class, but
substituting the keyword <code>class</code> with <code>module</code>.</li>
<li>The scope resolution operator in Ruby is the double colon (<code>::</code>), like in
Perl.</li>
<li><p>To create a method inside a module, you have to prefix it by the name of
the module with a dot or with <code>self.</code>, if you want to create a method to
be called outside the module.</p>

<p>The same also holds for creating class methods (as opposed to <em>instance</em>
methods): they can be simply named <code>self.foo</code> to get a class method called
<code>foo</code>.</p></li>
<li>While some modules are already "preloaded" by the interpreter (e.g.,
<code>Math</code>), others need to be explicitly loaded. We do this by using <code>require
'foo'</code> to load the module (in the file <code>foo</code>?).</li>
</ul>

<h1 id="mixins"><a name="index14h1"></a>Mixins</h1>

<ul>
<li><p>A mixin is the use of a module to "enrich" a class, adding "instance"
methods of the module to the class.</p>

<p>It is, in a sense, a way to have some of multiple inheritance in Ruby
(without its headaches?)</p></li>
<li>Using the word <code>include Foo</code> imports the items of the module <code>Foo</code> in the
current namespace for <em>instances</em> of a class.</li>
<li>Using the word <code>extend Foo</code> imports the items of the module <code>Foo</code> in the
current namespace as class methods/attributes.</li>
</ul>

<h1 id="conventions"><a name="index15h1"></a>Conventions</h1>

<ul>
<li>Local variables are named in lower case, with parts separated by
underscores, as in <code>my_name</code>.</li>
<li>Methods that return boolean values have a question mark (<code>?</code>) at the end
of their name.</li>
<li>Methods that have destructive side-effects (like changing their input)
have an exclamation mark (<code>!</code>) at the end of their name.</li>
<li>Code is indented by 2 spaces.</li>
<li>Like other languages, constants are written in all caps, with words
separated by underscores. For example, <code>MAX_VALUE</code>.</li>
<li>Global variables are prefixed with a dollar sign (e.g., <code>&#036;Foo</code>).</li>
<li>Classes are named in camel case (no initial lowercase).</li>
<li>The "poetic mode" in Ruby recommends one to omit the parentheses on
function calls (whenever unambiguous) and, in essence, to write as little
"bureaucracy" (like the explicit <code>return</code> keyword in methods).</li>
</ul>

</section>





<div id="comments">

<div id="disqus_comments">
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'digitaljunkyard'; // required: replace example with your forum shortname
    var discus_identifier = 'posts/beginning_ruby';
    var disqus_url = 'http://cynic.cc/blog//posts/beginning_ruby/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</div>

</div>

</div>

<footer id="footer" class="pagefooter">

<nav id="pageinfo">




<nav class="tags">
Tags:

<a href="../../tags/debian/" rel="tag">debian</a>

<a href="../../tags/free-software/" rel="tag">free-software</a>

<a href="../../tags/ruby/" rel="tag">ruby</a>

<a href="../../tags/study/" rel="tag">study</a>

</nav>








<div class="pagedate">
Last edited <time datetime="2013-08-02T09:12:26Z">2013-08-02T06:12:26 BRT</time>
<!-- Created <time datetime="2013-07-21T00:50:00Z" pubdate="pubdate">2013-07-20T21:50:00 BRT</time> -->
</div>

</nav>


<!-- from Rogério Brito's Digital Junkyard -->
</footer>

</article>

<!-- MathJax -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- MathJax -->

</body>
</html>

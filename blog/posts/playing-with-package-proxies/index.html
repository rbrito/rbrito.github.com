<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8" />
<title>Playing with Package Proxies</title>

<link rel="stylesheet" href="../../style.css" type="text/css" />

<link rel="stylesheet" href="../../local.css" type="text/css" />




<meta name="date" content="2007-03-15 23:00:00" />


</head>
<body>

<article class="page">

<section class="pageheader">
<header class="header">
<span>
<span class="parentlinks">

<a href="../../">Rogério Brito's Digital Junkyard</a>/

<a href="../">posts</a>/

</span>
<span class="title">
Playing with Package Proxies

</span>
</span>

</header>


<nav class="actions">
<ul>


<li><a href="../../recentchanges/">RecentChanges</a></li>








</ul>
</nav>






</section>


<aside class="sidebar">


<div><div class="calendar"><table class="month-calendar">
    <tr>
    <th class="month-calendar-arrow"><a href="../../archives/2013/07/" title="July">&larr;</a></th>
    <th class="month-calendar-head" colspan="5"><a href="../../archives/2013/08/" title="August">Aug 2013</a></th>
    <th class="month-calendar-arrow"><a href="../../archives/2013/09/" title="September">&rarr;</a></th>
    </tr>
    <tr>
        <th class="month-calendar-day-head Sunday" title="Sunday">S</th>
        <th class="month-calendar-day-head Monday" title="Monday">M</th>
        <th class="month-calendar-day-head Tuesday" title="Tuesday">T</th>
        <th class="month-calendar-day-head Wednesday" title="Wednesday">W</th>
        <th class="month-calendar-day-head Thursday" title="Thursday">T</th>
        <th class="month-calendar-day-head Friday" title="Friday">F</th>
        <th class="month-calendar-day-head Saturday" title="Saturday">S</th>
    </tr>
    <tr>
        <td class="month-calendar-day-noday Sunday">&nbsp;</td>
        <td class="month-calendar-day-noday Monday">&nbsp;</td>
        <td class="month-calendar-day-noday Tuesday">&nbsp;</td>
        <td class="month-calendar-day-noday Wednesday">&nbsp;</td>
        <td class="month-calendar-day-nolink Thursday">1</td>
        <td class="month-calendar-day-nolink Friday">2</td>
        <td class="month-calendar-day-nolink Saturday">3</td>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">4</td>
        <td class="month-calendar-day-nolink Monday">5</td>
        <td class="month-calendar-day-nolink Tuesday">6</td>
        <td class="month-calendar-day-nolink Wednesday">7</td>
        <td class="month-calendar-day-nolink Thursday">8</td>
        <td class="month-calendar-day-nolink Friday">9</td>
        <td class="month-calendar-day-nolink Saturday">10</td>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">11</td>
        <td class="month-calendar-day-nolink Monday">12</td>
        <td class="month-calendar-day-nolink Tuesday">13</td>
        <td class="month-calendar-day-nolink Wednesday">14</td>
        <td class="month-calendar-day-nolink Thursday">15</td>
        <td class="month-calendar-day-nolink Friday">16</td>
        <td class="month-calendar-day-nolink Saturday">17</td>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">18</td>
        <td class="month-calendar-day-nolink Monday">19</td>
        <td class="month-calendar-day-nolink Tuesday">20</td>
        <td class="month-calendar-day-this-day Wednesday"><a href="../sna_acceleration_vs_uxa/" title="sna acceleration vs uxa">21</a></td>
        <td class="month-calendar-day-future Thursday">22</td>
        <td class="month-calendar-day-nolink Friday">23</td>
        <td class="month-calendar-day-nolink Saturday">24</td>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">25</td>
        <td class="month-calendar-day-nolink Monday">26</td>
        <td class="month-calendar-day-nolink Tuesday">27</td>
        <td class="month-calendar-day-nolink Wednesday">28</td>
        <td class="month-calendar-day-nolink Thursday">29</td>
        <td class="month-calendar-day-nolink Friday">30</td>
        <td class="month-calendar-day-nolink Saturday">31</td>
    </tr>
</table>
</div></div>


<p><a href="../../about/">About Me</a></p>

<p><a href="../../archives/">Archives</a></p>

</aside>


<div id="pagebody">

<section id="content">
<p>Have been playing with the great idea of <a
href="http://lists.debian.org/debian-mentors/2009/03/msg00210.html">caching</a>
<a href="http://lwn.net/Articles/318658/">deb</a> packages. I finally
settled for the option of using <code><a
href="http://git.debian.org/?p=pkg-ocaml-maint/packages/approx.git">approx</a></code>,
which does a really nice job of caching packages.</p>

<p>Actually, it fullfils quite a lot of requirements and even surpasses some of my expectations:</p>

<ul>
<li>It supports multiple architectures (in fact, this is important for me, as
I use <code>i386</code>, <code>amd64</code>, and <code>powerpc</code>.</li>
<li>It can support multiple distributions (both different versions of the same
distribution and completely different distributions, as long as they use a
repository like <a href="http://www.debian.org/">Debian</a>'s, as is the
case of <a href="http://www.ubuntu.com/">Ubuntu</a>).</li></li>
<li>It keeps its directory hierarchy neatly organized, like that of Debian, in
a package pool, which saves space and makes everything easier and faster
to find (and has the advantage of being fast with filesystems that don't
cope well with many entries in one directory).</li>
</ul>


<p>The transition wasn't painless from <a href="http://packages.debian.org/apt%2Dmove">apt-move</a>, since apt-move
moves the files, but renames them in a way that they don't keep epochs in
their names, which makes <code>approx-import</code> moan about the packages.</p>

<p>For places where I am too lazy to import the packages, I just filled the
cache redownloading the packages with something approximately like this:</p>

<pre><code>  apt-get -d --reinstall install $(dpkg -l | grep "^ii" | cut -d " " -f 3)
</code></pre>

<p>Well, I hope that this experience happens to be useful for other people, so
that they can benefit from it. Rebuilding packages with a package cacher is
much more pleasant, especially if the package has a lot of
build-dependencies.</p>

</section>





<div id="comments">

<div id="disqus_comments">
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'digitaljunkyard'; // required: replace example with your forum shortname
    var discus_identifier = 'posts/playing-with-package-proxies';
    var disqus_url = 'http://cynic.cc/blog//posts/playing-with-package-proxies/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</div>

</div>

</div>

<footer id="footer" class="pagefooter">

<nav id="pageinfo">




<nav class="tags">
Tags:

<a href="../../tags/approx/" rel="tag">approx</a>

<a href="../../tags/apt-move/" rel="tag">apt-move</a>

<a href="../../tags/computers/" rel="tag">computers</a>

<a href="../../tags/debian/" rel="tag">debian</a>

<a href="../../tags/embedded/" rel="tag">embedded</a>

<a href="../../tags/linux/" rel="tag">linux</a>

<a href="../../tags/proxy/" rel="tag">proxy</a>

<a href="../../tags/ubuntu/" rel="tag">ubuntu</a>

</nav>








<div class="pagedate">
Last edited <time datetime="2012-09-07T06:54:06Z">2012-09-07T03:54:06 BRT</time>
<!-- Created <time datetime="2007-03-16T02:00:00Z" pubdate="pubdate">2007-03-15T23:00:00 BRT</time> -->
</div>

</nav>


<!-- from Rogério Brito's Digital Junkyard -->
</footer>

</article>

<!-- MathJax -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- MathJax -->

</body>
</html>
